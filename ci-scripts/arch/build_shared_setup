set -evx

# valgrind does not get installed, valgrind on arch is broken.

pacman -Syu --noconfirm

echo 'NoExtract  = !usr/share/i18n/charmaps/ISO-8859-1.gz' >>/etc/pacman.conf
grep NoExtract /etc/pacman.conf
echo 'en_US ISO-8859-1' >>/etc/locale.gen
echo 'en_US.UTF-8 UTF-8' >>/etc/locale.gen

pacman -Syu \
    automake \
    autoconf-archive \
    apache \
    binutils \
    coreutils \
    diffutils \
    expect \
    gawk \
    gcc \
    gdbm \
    ghostscript \
    glibc \
    glibc-locales \
    gnupg \
    groff \
    gzip \
    hunspell \
    libidn2 \
    libtool \
    libxml2 \
    mailcap \
    make \
    mariadb \
    ncurses \
    netpbm \
    openldap \
    openssl \
    pam \
    pcre \
    pcre2 \
    perl \
    pkgconfig \
    postgresql \
    procps-ng \
    sed \
    sqlite \
    icu \
    wget \
    which \
    zlib \
    --noconfirm

mkdir -p /var/www/cgi-bin /var/www/html
echo /usr/local/lib > /etc/ld.so.conf.d/local.conf
echo /usr/local/lib64 >> /etc/ld.so.conf.d/local.conf

locale-gen
